// Koledar odvozov odpadkov 2026 - Komunalno podjetje Logatec d.o.o.
// Ekstrahirano iz: koledar2026.pdf (uradni vir)

export type WasteType = 'E' | 'M' | 'B';

export interface CollectionDay {
  date: string; // ISO format YYYY-MM-DD
  types: WasteType[];
  okolisEM?: number; // 1-12 za E/M
  okolisB?: number;  // 1-2 za B
}

// Celoten koledar 2026 po okoliših - URADNI PODATKI IZ PDF
export const schedule2026: Record<string, string[]> = {
  // ============ E/M OKOLIŠI ============

  // Okoliš 1 - E1 M1 (četrtki)
  "E1": [
    "2026-01-22",
    "2026-02-12",
    "2026-03-05", "2026-03-26",
    "2026-04-16",
    "2026-05-07", "2026-05-28",
    "2026-06-18",
    "2026-07-09", "2026-07-30",
    "2026-08-20",
    "2026-09-10",
    "2026-10-01", "2026-10-22",
    "2026-11-12",
    "2026-12-03", "2026-12-24"
  ],
  "M1": [
    "2026-01-22",
    "2026-02-12",
    "2026-03-05", "2026-03-26",
    "2026-04-16",
    "2026-05-07", "2026-05-28",
    "2026-06-18",
    "2026-07-09", "2026-07-30",
    "2026-08-20",
    "2026-09-10",
    "2026-10-01", "2026-10-22",
    "2026-11-12",
    "2026-12-03", "2026-12-24"
  ],

  // Okoliš 2 - E2 M2 (srede)
  "E2": [
    "2026-01-21",
    "2026-02-11",
    "2026-03-04", "2026-03-25",
    "2026-04-15",
    "2026-05-06", "2026-05-27",
    "2026-06-17",
    "2026-07-08", "2026-07-29",
    "2026-08-19",
    "2026-09-09", "2026-09-30",
    "2026-10-21",
    "2026-11-11",
    "2026-12-02", "2026-12-23"
  ],
  "M2": [
    "2026-01-21",
    "2026-02-11",
    "2026-03-04", "2026-03-25",
    "2026-04-15",
    "2026-05-06", "2026-05-27",
    "2026-06-17",
    "2026-07-08", "2026-07-29",
    "2026-08-19",
    "2026-09-09", "2026-09-30",
    "2026-10-21",
    "2026-11-11",
    "2026-12-02", "2026-12-23"
  ],

  // Okoliš 3 - E3 M3 (četrtki)
  "E3": [
    "2026-01-08", "2026-01-29",
    "2026-02-19",
    "2026-03-12",
    "2026-04-02", "2026-04-23",
    "2026-05-14",
    "2026-06-04", "2026-06-23",
    "2026-07-16",
    "2026-08-06", "2026-08-27",
    "2026-09-17",
    "2026-10-08", "2026-10-29",
    "2026-11-19",
    "2026-12-10", "2026-12-31"
  ],
  "M3": [
    "2026-01-08", "2026-01-29",
    "2026-02-19",
    "2026-03-12",
    "2026-04-02", "2026-04-23",
    "2026-05-14",
    "2026-06-04", "2026-06-23",
    "2026-07-16",
    "2026-08-06", "2026-08-27",
    "2026-09-17",
    "2026-10-08", "2026-10-29",
    "2026-11-19",
    "2026-12-10", "2026-12-31"
  ],

  // Okoliš 4 - E4 M4 (petki)
  "E4": [
    "2026-01-16",
    "2026-02-06", "2026-02-27",
    "2026-03-20",
    "2026-04-10",
    "2026-05-05", "2026-05-22",
    "2026-06-12",
    "2026-07-03", "2026-07-24",
    "2026-08-14",
    "2026-09-04", "2026-09-25",
    "2026-10-16",
    "2026-11-06", "2026-11-27",
    "2026-12-18"
  ],
  "M4": [
    "2026-01-16",
    "2026-02-06", "2026-02-27",
    "2026-03-20",
    "2026-04-10",
    "2026-05-05", "2026-05-22",
    "2026-06-12",
    "2026-07-03", "2026-07-24",
    "2026-08-14",
    "2026-09-04", "2026-09-25",
    "2026-10-16",
    "2026-11-06", "2026-11-27",
    "2026-12-18"
  ],

  // Okoliš 5 - E5 M5 (srede)
  "E5": [
    "2026-01-07", "2026-01-28",
    "2026-02-18",
    "2026-03-11",
    "2026-04-01", "2026-04-22",
    "2026-05-13",
    "2026-06-03", "2026-06-24",
    "2026-07-15",
    "2026-08-05", "2026-08-26",
    "2026-09-16",
    "2026-10-07", "2026-10-28",
    "2026-11-18",
    "2026-12-09", "2026-12-30"
  ],
  "M5": [
    "2026-01-07", "2026-01-28",
    "2026-02-18",
    "2026-03-11",
    "2026-04-01", "2026-04-22",
    "2026-05-13",
    "2026-06-03", "2026-06-24",
    "2026-07-15",
    "2026-08-05", "2026-08-26",
    "2026-09-16",
    "2026-10-07", "2026-10-28",
    "2026-11-18",
    "2026-12-09", "2026-12-30"
  ],

  // Okoliš 6 - E6 M6 (srede)
  "E6": [
    "2026-01-14",
    "2026-02-04", "2026-02-25",
    "2026-03-18",
    "2026-04-08", "2026-04-29",
    "2026-05-20",
    "2026-06-10",
    "2026-07-01", "2026-07-22",
    "2026-08-12",
    "2026-09-02", "2026-09-23",
    "2026-10-14",
    "2026-11-04", "2026-11-25",
    "2026-12-16"
  ],
  "M6": [
    "2026-01-14",
    "2026-02-04", "2026-02-25",
    "2026-03-18",
    "2026-04-08", "2026-04-29",
    "2026-05-20",
    "2026-06-10",
    "2026-07-01", "2026-07-22",
    "2026-08-12",
    "2026-09-02", "2026-09-23",
    "2026-10-14",
    "2026-11-04", "2026-11-25",
    "2026-12-16"
  ],

  // Okoliš 7 - E7 M7 (četrtki)
  "E7": [
    "2026-01-15",
    "2026-02-05", "2026-02-26",
    "2026-03-19",
    "2026-04-09", "2026-04-30",
    "2026-05-21",
    "2026-06-11",
    "2026-07-02", "2026-07-23",
    "2026-08-13",
    "2026-09-03", "2026-09-24",
    "2026-10-15",
    "2026-11-05", "2026-11-26",
    "2026-12-17"
  ],
  "M7": [
    "2026-01-15",
    "2026-02-05", "2026-02-26",
    "2026-03-19",
    "2026-04-09", "2026-04-30",
    "2026-05-21",
    "2026-06-11",
    "2026-07-02", "2026-07-23",
    "2026-08-13",
    "2026-09-03", "2026-09-24",
    "2026-10-15",
    "2026-11-05", "2026-11-26",
    "2026-12-17"
  ],

  // Okoliš 8 - E8 M8 (torki/petki)
  "E8": [
    "2026-01-06", "2026-01-23",
    "2026-02-13",
    "2026-03-06", "2026-03-27",
    "2026-04-17",
    "2026-05-08", "2026-05-29",
    "2026-06-19",
    "2026-07-10", "2026-07-31",
    "2026-08-21",
    "2026-09-11",
    "2026-10-02", "2026-10-23",
    "2026-11-13",
    "2026-12-04", "2026-12-21"
  ],
  "M8": [
    "2026-01-06", "2026-01-23",
    "2026-02-13",
    "2026-03-06", "2026-03-27",
    "2026-04-17",
    "2026-05-08", "2026-05-29",
    "2026-06-19",
    "2026-07-10", "2026-07-31",
    "2026-08-21",
    "2026-09-11",
    "2026-10-02", "2026-10-23",
    "2026-11-13",
    "2026-12-04", "2026-12-21"
  ],

  // Okoliš 9 - E9 M9 (petki)
  "E9": [
    "2026-01-09", "2026-01-30",
    "2026-02-20",
    "2026-03-13",
    "2026-04-03", "2026-04-24",
    "2026-05-15",
    "2026-06-05", "2026-06-26",
    "2026-07-17",
    "2026-08-07", "2026-08-28",
    "2026-09-18",
    "2026-10-09", "2026-10-30",
    "2026-11-20",
    "2026-12-11"
  ],
  "M9": [
    "2026-01-09", "2026-01-30",
    "2026-02-20",
    "2026-03-13",
    "2026-04-03", "2026-04-24",
    "2026-05-15",
    "2026-06-05", "2026-06-26",
    "2026-07-17",
    "2026-08-07", "2026-08-28",
    "2026-09-18",
    "2026-10-09", "2026-10-30",
    "2026-11-20",
    "2026-12-11"
  ],

  // Okoliš 10 - E10 (skupaj z E6), M10 (skupaj z M1)
  "E10": [
    "2026-01-14",
    "2026-02-04", "2026-02-25",
    "2026-03-18",
    "2026-04-08", "2026-04-29",
    "2026-05-20",
    "2026-06-10",
    "2026-07-01", "2026-07-22",
    "2026-08-12",
    "2026-09-02", "2026-09-23",
    "2026-10-14",
    "2026-11-04", "2026-11-25",
    "2026-12-16"
  ],
  "M10": [
    "2026-01-22",
    "2026-02-12",
    "2026-03-05", "2026-03-26",
    "2026-04-16",
    "2026-05-07", "2026-05-28",
    "2026-06-18",
    "2026-07-09", "2026-07-30",
    "2026-08-20",
    "2026-09-10",
    "2026-10-01", "2026-10-22",
    "2026-11-12",
    "2026-12-03", "2026-12-24"
  ],

  // Okoliš 11 - tedensko (vsako sredo, E in M skupaj)
  "E11": [
    "2026-01-07", "2026-01-14", "2026-01-21", "2026-01-28",
    "2026-02-04", "2026-02-11", "2026-02-18", "2026-02-25",
    "2026-03-04", "2026-03-11", "2026-03-18", "2026-03-25",
    "2026-04-01", "2026-04-08", "2026-04-15", "2026-04-22", "2026-04-29",
    "2026-05-06", "2026-05-13", "2026-05-20", "2026-05-27",
    "2026-06-03", "2026-06-10", "2026-06-17", "2026-06-24",
    "2026-07-01", "2026-07-08", "2026-07-15", "2026-07-22", "2026-07-29",
    "2026-08-05", "2026-08-12", "2026-08-19", "2026-08-26",
    "2026-09-02", "2026-09-09", "2026-09-16", "2026-09-23", "2026-09-30",
    "2026-10-07", "2026-10-14", "2026-10-21", "2026-10-28",
    "2026-11-04", "2026-11-11", "2026-11-18", "2026-11-25",
    "2026-12-02", "2026-12-09", "2026-12-16", "2026-12-23", "2026-12-30"
  ],
  "M11": [
    "2026-01-07", "2026-01-14", "2026-01-21", "2026-01-28",
    "2026-02-04", "2026-02-11", "2026-02-18", "2026-02-25",
    "2026-03-04", "2026-03-11", "2026-03-18", "2026-03-25",
    "2026-04-01", "2026-04-08", "2026-04-15", "2026-04-22", "2026-04-29",
    "2026-05-06", "2026-05-13", "2026-05-20", "2026-05-27",
    "2026-06-03", "2026-06-10", "2026-06-17", "2026-06-24",
    "2026-07-01", "2026-07-08", "2026-07-15", "2026-07-22", "2026-07-29",
    "2026-08-05", "2026-08-12", "2026-08-19", "2026-08-26",
    "2026-09-02", "2026-09-09", "2026-09-16", "2026-09-23", "2026-09-30",
    "2026-10-07", "2026-10-14", "2026-10-21", "2026-10-28",
    "2026-11-04", "2026-11-11", "2026-11-18", "2026-11-25",
    "2026-12-02", "2026-12-09", "2026-12-16", "2026-12-23", "2026-12-30"
  ],

  // Okoliš 12 - E12 (skupaj z E9), M12 (skupaj z M8)
  "E12": [
    "2026-01-09", "2026-01-30",
    "2026-02-20",
    "2026-03-13",
    "2026-04-03", "2026-04-24",
    "2026-05-15",
    "2026-06-05", "2026-06-26",
    "2026-07-17",
    "2026-08-07", "2026-08-28",
    "2026-09-18",
    "2026-10-09", "2026-10-30",
    "2026-11-20",
    "2026-12-11"
  ],
  "M12": [
    "2026-01-06", "2026-01-23",
    "2026-02-13",
    "2026-03-06", "2026-03-27",
    "2026-04-17",
    "2026-05-08", "2026-05-29",
    "2026-06-19",
    "2026-07-10", "2026-07-31",
    "2026-08-21",
    "2026-09-11",
    "2026-10-02", "2026-10-23",
    "2026-11-13",
    "2026-12-04", "2026-12-21"
  ],

  // ============ B OKOLIŠI ============

  // Okoliš B1 - ponedeljki (razen praznikov, ko je skupaj z B2)
  "B1": [
    "2026-01-05", "2026-01-19",
    "2026-02-02", "2026-02-16",
    "2026-03-02", "2026-03-16", "2026-03-30",
    "2026-04-07", "2026-04-13", "2026-04-20", "2026-04-28",
    "2026-05-04", "2026-05-11", "2026-05-18", "2026-05-25",
    "2026-06-01", "2026-06-08", "2026-06-15", "2026-06-22", "2026-06-29",
    "2026-07-06", "2026-07-13", "2026-07-20", "2026-07-27",
    "2026-08-03", "2026-08-10", "2026-08-17", "2026-08-24", "2026-08-31",
    "2026-09-07", "2026-09-14", "2026-09-21", "2026-09-28",
    "2026-10-05", "2026-10-12", "2026-10-19", "2026-10-26",
    "2026-11-02", "2026-11-09", "2026-11-16", "2026-11-23", "2026-11-30",
    "2026-12-14", "2026-12-28"
  ],

  // Okoliš B2 - torki (razen praznikov, ko je skupaj z B1)
  "B2": [
    "2026-01-05", "2026-01-20",
    "2026-02-03", "2026-02-17",
    "2026-03-03", "2026-03-17", "2026-03-31",
    "2026-04-07", "2026-04-14", "2026-04-21", "2026-04-28",
    "2026-05-04", "2026-05-12", "2026-05-19", "2026-05-26",
    "2026-06-02", "2026-06-09", "2026-06-16", "2026-06-22", "2026-06-30",
    "2026-07-07", "2026-07-14", "2026-07-21", "2026-07-28",
    "2026-08-04", "2026-08-11", "2026-08-18", "2026-08-25",
    "2026-09-01", "2026-09-08", "2026-09-15", "2026-09-22", "2026-09-29",
    "2026-10-06", "2026-10-13", "2026-10-20", "2026-10-27",
    "2026-11-03", "2026-11-10", "2026-11-17", "2026-11-24",
    "2026-12-01", "2026-12-15", "2026-12-29"
  ]
};

// Prazniki 2026 (relevantni za Slovenijo)
export const holidays2026: Record<string, string> = {
  "2026-01-01": "Novo leto",
  "2026-01-02": "Novo leto",
  "2026-02-08": "Prešernov dan",
  "2026-04-05": "Velikonočna nedelja",
  "2026-04-06": "Velikonočni ponedeljek",
  "2026-04-27": "Dan upora proti okupatorju",
  "2026-05-01": "Praznik dela",
  "2026-05-02": "Praznik dela",
  "2026-06-25": "Dan državnosti",
  "2026-08-15": "Marijino vnebovzetje",
  "2026-10-31": "Dan reformacije",
  "2026-11-01": "Dan spomina na mrtve",
  "2026-12-25": "Božič",
  "2026-12-26": "Dan samostojnosti in enotnosti"
};

// Helper funkcije
export function getCollectionDates(okolisEM: number, okolisB: number): CollectionDay[] {
  const result: CollectionDay[] = [];
  const seen = new Set<string>();

  // Dodaj E in M datume
  const eKey = `E${okolisEM}`;
  const mKey = `M${okolisEM}`;
  const bKey = `B${okolisB}`;

  // E datumi
  (schedule2026[eKey] || []).forEach(date => {
    if (!seen.has(date)) {
      seen.add(date);
      result.push({ date, types: ['E'], okolisEM });
    } else {
      const existing = result.find(d => d.date === date);
      if (existing && !existing.types.includes('E')) {
        existing.types.push('E');
      }
    }
  });

  // M datumi
  (schedule2026[mKey] || []).forEach(date => {
    if (!seen.has(date)) {
      seen.add(date);
      result.push({ date, types: ['M'], okolisEM });
    } else {
      const existing = result.find(d => d.date === date);
      if (existing && !existing.types.includes('M')) {
        existing.types.push('M');
      }
    }
  });

  // B datumi
  (schedule2026[bKey] || []).forEach(date => {
    if (!seen.has(date)) {
      seen.add(date);
      result.push({ date, types: ['B'], okolisB });
    } else {
      const existing = result.find(d => d.date === date);
      if (existing && !existing.types.includes('B')) {
        existing.types.push('B');
        existing.okolisB = okolisB;
      }
    }
  });

  // Sortiraj po datumu
  return result.sort((a, b) => a.date.localeCompare(b.date));
}

export function getNextCollection(okolisEM: number, okolisB: number, fromDate: Date = new Date()): CollectionDay | null {
  const allDates = getCollectionDates(okolisEM, okolisB);
  const today = fromDate.toISOString().split('T')[0];

  return allDates.find(d => d.date >= today) || null;
}

export function getUpcomingCollections(okolisEM: number, okolisB: number, days: number = 30): CollectionDay[] {
  const allDates = getCollectionDates(okolisEM, okolisB);
  const today = new Date();
  const endDate = new Date(today.getTime() + days * 24 * 60 * 60 * 1000);

  const todayStr = today.toISOString().split('T')[0];
  const endStr = endDate.toISOString().split('T')[0];

  return allDates.filter(d => d.date >= todayStr && d.date <= endStr);
}

export function isCollectionTomorrow(okolisEM: number, okolisB: number): CollectionDay | null {
  const tomorrow = new Date();
  tomorrow.setDate(tomorrow.getDate() + 1);
  const tomorrowStr = tomorrow.toISOString().split('T')[0];

  const allDates = getCollectionDates(okolisEM, okolisB);
  return allDates.find(d => d.date === tomorrowStr) || null;
}
